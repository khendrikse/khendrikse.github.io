<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><script type="application/ld+json">{&quot;@context&quot;:&quot;https://schema.org&quot;,&quot;@type&quot;:&quot;FAQPage&quot;,&quot;mainEntity&quot;:[[{&quot;@type&quot;:&quot;Question&quot;,&quot;name&quot;:&quot;How can I set security headers for the Gatsby Develop script?&quot;,&quot;acceptedAnswer&quot;:{&quot;@type&quot;:&quot;Answer&quot;,&quot;text&quot;:&quot;You can use Gatsby&#x27;s developMiddleware in gatsby-config.js to set different headers on the response object&quot;}}]]}</script><script type="application/ld+json">{&quot;@context&quot;:&quot;https://schema.org&quot;,&quot;@type&quot;:&quot;BlogPosting&quot;,&quot;mainEntityOfPage&quot;:{&quot;@type&quot;:&quot;WebPage&quot;,&quot;@id&quot;:&quot;https://khendrikse.github.io/set-your-gatsby-develop-security-headers&quot;},&quot;headline&quot;:&quot;TIL: How to set security headers for Gatsby Develop&quot;,&quot;description&quot;:&quot;If, for any reason, you need to run gatsby develop and set security headers. Using advanced proxying is the way to go.&quot;,&quot;image&quot;:&quot;https://khendrikse.github.io/_next/static/chunks/images/2021-09-25-ba6efe028c4e0290126182196eec765f.jpg&quot;,&quot;datePublished&quot;:[&quot;2021-09-25&quot;],&quot;dateModified&quot;:[&quot;2021-09-25&quot;],&quot;author&quot;:{&quot;@type&quot;:&quot;Person&quot;,&quot;name&quot;:&quot;Karin Hendrikse&quot;,&quot;url&quot;:&quot;https://khendrikse.github.io/about&quot;}}</script><meta http-equiv="refresh" content="2;url=https://khendrikse.github.io/blog/set-your-gatsby-develop-security-headers"/><link rel="canonical" href="https://khendrikse.github.io/blog/set-your-gatsby-develop-security-headers"/><script type="application/ld+json">{&quot;@context&quot;:&quot;https://schema.org/&quot;,&quot;@type&quot;:&quot;BreadcrumbList&quot;,&quot;itemListElement&quot;:[{&quot;@type&quot;:&quot;ListItem&quot;,&quot;position&quot;:1,&quot;name&quot;:&quot;home&quot;,&quot;item&quot;:&quot;https://khendrikse.github.io/&quot;},{&quot;@type&quot;:&quot;ListItem&quot;,&quot;position&quot;:2,&quot;name&quot;:&quot;blog&quot;,&quot;item&quot;:&quot;https://khendrikse.github.io/blog/&quot;},{&quot;@type&quot;:&quot;ListItem&quot;,&quot;position&quot;:3,&quot;name&quot;:&quot;TIL: How to set security headers for Gatsby Develop&quot;,&quot;item&quot;:&quot;https://khendrikse.github.io/post/set-your-gatsby-develop-security-headers&quot;}]}</script><title>TIL: How to set security headers for Gatsby Develop | Kar...</title><meta name="twitter:title" content="TIL: How to set security headers for Gatsby Develop | Karin Hendrikse"/><meta property="og:title" content="TIL: How to set security headers for Gatsby Develop | Karin Hendrikse"/><meta name="description" content="If, for any reason, you need to run gatsby develop and set security headers. Using advanced proxying is the way to go."/><meta name="twitter:description" content="If, for any reason, you need to run gatsby develop and set security headers. Using advanced proxying is the way to go."/><meta property="og:description" content="If, for any reason, you need to run gatsby develop and set security headers. Using advanced proxying is the way to go."/><meta name="twitter:site" content="@k_henhey"/><meta name="twitter:creator" content="@k_henhey"/><meta name="twitter:card" content="summary"/><meta property="og:type" content="article"/><meta property="og:url" content="https://khendrikse.github.io/post/set-your-gatsby-develop-security-headers"/><meta name="twitter:image" content="https://khendrikse.github.io/_next/static/chunks/images/2021-09-25-ba6efe028c4e0290126182196eec765f.jpg"/><meta property="og:image" content="https://khendrikse.github.io/_next/static/chunks/images/2021-09-25-ba6efe028c4e0290126182196eec765f.jpg"/><meta name="twitter:image:alt" content="a white cat napping"/><meta name="next-head-count" content="21"/><link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;ðŸŒ±&lt;/text&gt;&lt;/svg&gt;"/><script data-goatcounter="https://khdev.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script><link rel="preload" href="/_next/static/css/95df6376c575c08c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/95df6376c575c08c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cd72f785afe8166e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cd72f785afe8166e.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-44197c38ec1603f8.js" defer=""></script><script src="/_next/static/chunks/framework-433e73989db4e225.js" defer=""></script><script src="/_next/static/chunks/main-0678d5b1b4679bdc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f723873558ff9929.js" defer=""></script><script src="/_next/static/chunks/d0447323-f8acf20273622023.js" defer=""></script><script src="/_next/static/chunks/0c428ae2-59051706ed2820c0.js" defer=""></script><script src="/_next/static/chunks/743-4da58bd1b048f991.js" defer=""></script><script src="/_next/static/chunks/603-dcb55c59b62ae9ee.js" defer=""></script><script src="/_next/static/chunks/580-adaf663db4ce4709.js" defer=""></script><script src="/_next/static/chunks/541-5357fe72de885bc6.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bpostname%5D-29f5b4a49c4c8fc9.js" defer=""></script><script src="/_next/static/D9afMo2f9anrE3mCZM7UB/_buildManifest.js" defer=""></script><script src="/_next/static/D9afMo2f9anrE3mCZM7UB/_ssgManifest.js" defer=""></script><script src="/_next/static/D9afMo2f9anrE3mCZM7UB/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="wrapper"><section class="layout"><header><nav class="navbar_navbar__lC1dX"><div class="navbar_navbar__inner__u9kLF"><h1 class="navbar_navbar__title__oKE_L"><a href="/">Karin Hendrikse</a></h1><ul class="navbar_navbar__menu__XlTKp"><li><a class="navbar_navbar__menu__item__6e5_F" href="/about">About</a></li><li><a class="navbar_navbar__menu__item__6e5_F" href="/blog">Blog</a></li><li><a class="navbar_navbar__menu__item__6e5_F" href="/projects">Projects</a></li><li><a class="navbar_navbar__menu__item__6e5_F" href="/">Home</a></li><li><a class="navbar_navbar__menu__icon__cKwHu" aria-label="RSS feed" href="https://khendrikse.github.io/feeds/feed.xml"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="14px" width="14px" xmlns="http://www.w3.org/2000/svg"><title>RSS</title><path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm1.5 2.5c5.523 0 10 4.477 10 10a1 1 0 1 1-2 0 8 8 0 0 0-8-8 1 1 0 0 1 0-2zm0 4a6 6 0 0 1 6 6 1 1 0 1 1-2 0 4 4 0 0 0-4-4 1 1 0 0 1 0-2zm.5 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"></path></svg></a></li></ul></div></nav></header><div class="content"><article><img class="post_post__header__image__F9dvV" src="data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAHAAoDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAUG/8QAHBAAAgICAwAAAAAAAAAAAAAAAAECAxESUYGS/8QAFAEBAAAAAAAAAAAAAAAAAAAAA//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/ANjZNqDeueyzvZzHyAOJ/9k=" alt="a white cat napping" style="transition:0.2s filter linear;filter:blur(20px)"/><div class="container"><div class="post_post__header__title__nmuW6"><h2>TIL: How to set security headers for Gatsby Develop</h2><div class="post_post__date_label__jb050">2021-09-25</div></div></div><div class="post_post__body__Iz5iR"><div class="container"><div class="post_post__intro__JzsWI"></div><p>Photo by <a href="https://unsplash.com/@hngstrm">Henry &amp; Co</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></p>
<p>There might come a time that you want to run your <a href="https://www.gatsbyjs.com/">Gatsby</a> app with security headers in development. To do this, you can utilize advanced proxying. Gatsby has a way to expose the <a href="https://expressjs.com/">Express.js</a> development server it uses to run the app whenever you use <code>gatsby develop</code>. This way you can add Express middleware.</p>
<h2>TL;DR</h2>
<p>If you just want to get your solution, feel free to use this setup inside your <code>gatsby-config.js</code> to set any security header you want. This example shows how you could set the <code>X-Frame-Options</code> HTTP response header to DENY.</p>
<pre><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-js" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#546e7a">// gatsby-config.js</span><span>
</span>
<span>module</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">exports</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>  </span><span class="token token function-variable" style="color:#c792ea">developMiddleware</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token parameter">app</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    app</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">use</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token parameter">req</span><span class="token token parameter" style="color:#89ddff">,</span><span class="token token parameter"> res</span><span class="token token parameter" style="color:#89ddff">,</span><span class="token token parameter"> next</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>      res</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">set</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;X-Frame-Options&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;DENY&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>      </span><span class="token token" style="color:#c792ea">next</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>  </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span></code></pre></pre>
<h2>Let&#x27;s break it down</h2>
<p>First we make sure we actually have a <code>gatsby-config.js</code> file. This file should be in the root of your Gatsby project and it can contain a bunch of different information. If you want to know more about this file, check out <a href="https://www.gatsbyjs.com/docs/reference/config-files/gatsby-config/">Gatsby&#x27;s own docs</a>.</p>
<pre><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-js" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#546e7a">// gatsby-config.js</span><span>
</span>
<span>module</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">exports</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>  </span><span class="token token" style="color:#546e7a">// an empty config file!</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span></code></pre></pre>
<h3>Using developMiddleware</h3>
<p>To expose Express.js we use the configuration key called <code>developMiddleware</code>. We pass it a function that takes a parameter called <code>app</code>. We can use that to <a href="https://expressjs.com/en/guide/using-middleware.html">add middleware</a> to Express.js.</p>
<p>We use <code>app.use()</code> and pass it a function that takes <code>req, res, next</code> parameters. Inside the function we set our security header on the <code>res</code> (response) object. After this, we call the next function that we got as a parameter.</p>
<pre><pre style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;overflow:auto;position:relative;margin:0.5em 0;padding:1.25em 1em"><code class="language-js" style="text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;color:#c3cee3;background:#263238;font-family:Roboto Mono, monospace;font-size:1em;line-height:1.5em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token token" style="color:#546e7a">// gatsby-config.js</span><span>
</span>
<span>module</span><span class="token token" style="color:#89ddff">.</span><span class="token token property-access">exports</span><span> </span><span class="token token" style="color:#89ddff">=</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>  </span><span class="token token function-variable" style="color:#c792ea">developMiddleware</span><span class="token token" style="color:#89ddff">:</span><span> </span><span class="token token parameter">app</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>    app</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">use</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">(</span><span class="token token parameter">req</span><span class="token token parameter" style="color:#89ddff">,</span><span class="token token parameter"> res</span><span class="token token parameter" style="color:#89ddff">,</span><span class="token token parameter"> next</span><span class="token token" style="color:#89ddff">)</span><span> </span><span class="token token arrow" style="color:#89ddff">=&gt;</span><span> </span><span class="token token" style="color:#89ddff">{</span><span>
</span><span>      res</span><span class="token token" style="color:#89ddff">.</span><span class="token token method property-access" style="color:#c792ea">set</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#c3e88d">&#x27;X-Frame-Options&#x27;</span><span class="token token" style="color:#89ddff">,</span><span> </span><span class="token token" style="color:#c3e88d">&#x27;DENY&#x27;</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>      </span><span class="token token" style="color:#c792ea">next</span><span class="token token" style="color:#89ddff">(</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>    </span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">)</span><span class="token token" style="color:#89ddff">;</span><span>
</span><span>  </span><span class="token token" style="color:#89ddff">}</span><span>
</span><span></span><span class="token token" style="color:#89ddff">}</span><span class="token token" style="color:#89ddff">;</span></code></pre></pre>
<p>Done! You should now be able to run <code>gatsby develop</code> and see the proper security headers on the documents that it serves you. Make sure to restart your server if you already had it running though, otherwise the changes won&#x27;t come through.</p></div></div></article></div></section></div><div class="footer_footer__7PBRV"><div class="footer_footer__links__Z7tzO"><a class="footer_footer__link__VHWPt" aria-label="GitHub" href="https://github.com/khendrikse"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="24px" width="24px" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg></a><a class="footer_footer__link__VHWPt" aria-label="linkedin" href="https://www.linkedin.com/in/karinhendrikse/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="24px" width="24px" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"></path></svg></a><a class="footer_footer__link__VHWPt" aria-label="Twitter" href="https://twitter.com/k_henhey"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="24px" width="24px" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"></path></svg></a><a class="footer_footer__link__VHWPt" aria-label="DEV.to" href="https://dev.to/khenhey"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="24px" width="24px" xmlns="http://www.w3.org/2000/svg"><title>DEV.to</title><title></title><path d="M7.42 10.05c-.18-.16-.46-.23-.84-.23H6l.02 2.44.04 2.45.56-.02c.41 0 .63-.07.83-.26.24-.24.26-.36.26-2.2 0-1.91-.02-1.96-.29-2.18zM0 4.94v14.12h24V4.94H0zM8.56 15.3c-.44.58-1.06.77-2.53.77H4.71V8.53h1.4c1.67 0 2.16.18 2.6.9.27.43.29.6.32 2.57.05 2.23-.02 2.73-.47 3.3zm5.09-5.47h-2.47v1.77h1.52v1.28l-.72.04-.75.03v1.77l1.22.03 1.2.04v1.28h-1.6c-1.53 0-1.6-.01-1.87-.3l-.3-.28v-3.16c0-3.02.01-3.18.25-3.48.23-.31.25-.31 1.88-.31h1.64v1.3zm4.68 5.45c-.17.43-.64.79-1 .79-.18 0-.45-.15-.67-.39-.32-.32-.45-.63-.82-2.08l-.9-3.39-.45-1.67h.76c.4 0 .75.02.75.05 0 .06 1.16 4.54 1.26 4.83.04.15.32-.7.73-2.3l.66-2.52.74-.04c.4-.02.73 0 .73.04 0 .14-1.67 6.38-1.8 6.68z"></path></svg></a><a class="footer_footer__link__VHWPt" aria-label="RSS feed" href="https://khendrikse.github.io/feeds/feed.xml"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="24px" width="24px" xmlns="http://www.w3.org/2000/svg"><title>RSS</title><path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm1.5 2.5c5.523 0 10 4.477 10 10a1 1 0 1 1-2 0 8 8 0 0 0-8-8 1 1 0 0 1 0-2zm0 4a6 6 0 0 1 6 6 1 1 0 1 1-2 0 4 4 0 0 0-4-4 1 1 0 0 1 0-2zm.5 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"></path></svg></a>Â© <!-- -->2022<!-- --> Karin Hendrikse</div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"siteTitle":"Karin Hendrikse","frontmatter":{"layout":"post","title":"TIL: How to set security headers for Gatsby Develop","published":true,"oldBlog":true,"date":"2021-09-25","description":"If, for any reason, you need to run gatsby develop and set security headers. Using advanced proxying is the way to go.","intro":null,"cover_image":"2021-09-25.jpg","cover_image_alt":"a white cat napping","faq":[{"question":"How can I set security headers for the Gatsby Develop script?","answer":"You can use Gatsby's developMiddleware in gatsby-config.js to set different headers on the response object"}]},"markdownBody":"\nPhoto by [Henry \u0026 Co](https://unsplash.com/@hngstrm) on [Unsplash](https://unsplash.com/?utm_source=unsplash\u0026utm_medium=referral\u0026utm_content=creditCopyText)\n\nThere might come a time that you want to run your [Gatsby](https://www.gatsbyjs.com/) app with security headers in development. To do this, you can utilize advanced proxying. Gatsby has a way to expose the [Express.js](https://expressjs.com/) development server it uses to run the app whenever you use `gatsby develop`. This way you can add Express middleware.\n\n## TL;DR\n\nIf you just want to get your solution, feel free to use this setup inside your `gatsby-config.js` to set any security header you want. This example shows how you could set the `X-Frame-Options` HTTP response header to DENY.\n\n```js\n// gatsby-config.js\n\nmodule.exports = {\n  developMiddleware: app =\u003e {\n    app.use((req, res, next) =\u003e {\n      res.set('X-Frame-Options', 'DENY');\n      next();\n    });\n  }\n};\n```\n\n## Let's break it down\n\nFirst we make sure we actually have a `gatsby-config.js` file. This file should be in the root of your Gatsby project and it can contain a bunch of different information. If you want to know more about this file, check out [Gatsby's own docs](https://www.gatsbyjs.com/docs/reference/config-files/gatsby-config/).\n\n```js\n// gatsby-config.js\n\nmodule.exports = {\n  // an empty config file!\n};\n```\n\n### Using developMiddleware\n\nTo expose Express.js we use the configuration key called `developMiddleware`. We pass it a function that takes a parameter called `app`. We can use that to [add middleware](https://expressjs.com/en/guide/using-middleware.html) to Express.js.\n\nWe use `app.use()` and pass it a function that takes `req, res, next` parameters. Inside the function we set our security header on the `res` (response) object. After this, we call the next function that we got as a parameter.\n\n```js\n// gatsby-config.js\n\nmodule.exports = {\n  developMiddleware: app =\u003e {\n    app.use((req, res, next) =\u003e {\n      res.set('X-Frame-Options', 'DENY');\n      next();\n    });\n  }\n};\n```\n\nDone! You should now be able to run `gatsby develop` and see the proper security headers on the documents that it serves you. Make sure to restart your server if you already had it running though, otherwise the changes won't come through.\n","date":["2021-09-25"],"slug":"set-your-gatsby-develop-security-headers","image":"https://khendrikse.github.io/_next/static/chunks/images/2021-09-25-ba6efe028c4e0290126182196eec765f.jpg"},"__N_SSG":true},"page":"/post/[postname]","query":{"postname":"2021-09-25-set-your-gatsby-develop-security-headers"},"buildId":"D9afMo2f9anrE3mCZM7UB","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>